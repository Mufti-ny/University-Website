(self.webpackChunkround_robin=self.webpackChunkround_robin||[]).push([[5,427],{33981:function(e,t,n){var r={"./AhaBody":98813,"./AhaBody.tsx":98813,"./AhaCloseX":85713,"./AhaCloseX.tsx":85713,"./AhaContainer":76552,"./AhaContainer.tsx":76552,"./AhaConversation":75992,"./AhaConversation.tsx":75992,"./AhaEmbeddedSmartForm":30638,"./AhaEmbeddedSmartForm.tsx":30638,"./AhaForm":75039,"./AhaForm.tsx":75039,"./AhaInput":21229,"./AhaInput.tsx":21229,"./AhaMessage":32496,"./AhaMessage.tsx":32496,"./AhaMessageContainer":2535,"./AhaMessageContainer.tsx":2535,"./AhaMessageFeedbackButtons":35442,"./AhaMessageFeedbackButtons.tsx":35442,"./AhaMessageMobile":40774,"./AhaMessageMobile.tsx":40774,"./AhaSearch":57881,"./AhaSearch.tsx":57881,"./AhaSearchResult":83758,"./AhaSearchResult.tsx":83758,"./AhaSearchResults":30531,"./AhaSearchResults.tsx":30531,"./AhaSearchSuggestions":68578,"./AhaSearchSuggestions.tsx":68578,"./AhaUserIcon":2419,"./AhaUserIcon.tsx":2419,"./FeedbackModal":32029,"./FeedbackModal.tsx":32029,"./HelpfulFeedbackButton":41814,"./HelpfulFeedbackButton.tsx":41814,"./NotHelpfulFeedbackButton":36495,"./NotHelpfulFeedbackButton.tsx":36495,"./StopGeneratingButton":46569,"./StopGeneratingButton.tsx":46569,"./aha-helper":84468,"./aha-helper.ts":84468,"./loading-states/AhaLoadingStateBase":9095,"./loading-states/AhaLoadingStateBase.tsx":9095,"./loading-states/GatheringState":96785,"./loading-states/GatheringState.tsx":96785,"./loading-states/InterpretingState":56183,"./loading-states/InterpretingState.tsx":56183,"./loading-states/Loader":47446,"./loading-states/Loader.tsx":47446,"./loading-states/SearchingState":10216,"./loading-states/SearchingState.tsx":10216,"./useSubmitPartialSmartFormCompletionOnExit":6623,"./useSubmitPartialSmartFormCompletionOnExit.ts":6623};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=33981},84468:function(e,t,n){"use strict";n.r(t),n.d(t,{getLastHalMessage:function(){return y},listenForChatGPTResponses:function(){return f},receiveMessage:function(){return E},stopGeneratingResponse:function(){return v},stopTyping:function(){return A},submitAhaQuery:function(){return w}});var r=n(9694),o=n(33829),s=n(63080);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e,t){var n;!t&&e&&(null===(n=window)||void 0===n||null===(n=n.top)||void 0===n||n.postMessage(e,"*"))},f=function(e,t,n,r,o){var s=encodeURIComponent(JSON.stringify(n.map((function(e){return{role:e.role,content:e.content}}))));r(new EventSource("/widgets/conversational-search/stream-query?query=".concat(e,"&accountId=").concat(t,"&conversationHistory=").concat(s,"&searchSourceUrl=").concat(o)))},h=function(e,t,n){return e.message?function(e,t,n){var r;return[].concat(c(t.slice(0,n)),[i(i({},t[n]),{},{content:((null===(r=t[n])||void 0===r?void 0:r.content)||"")+(e.message||"")})],c(t.slice(n+1,t.length)))}(e,t,n):function(e,t,n){return[].concat(c(t.slice(0,n)),[i(i({},t[n]),{},{sources:e.sources,searchResults:e.searchResults,knowsAnswer:e.knowsAnswer})],c(t.slice(n+1,t.length)))}(e,t,n)},p=function(e,t,n,r,o,a,u,l){var d={method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({sources:e,account_id:n.id,trackId:(0,s.vm)(),halda_preview:r?"1":"0",variantsUserHasSeen:a,isInHub2:l})},f={background_billboard_color_hex:n.backgroundBillboardColorHex,button_background_color_hex:n.backgroundButtonColorHex},h=new URLSearchParams(f),p="/widgets/conversational-search/check-source-urls-for-matching-smart-form?".concat(h);fetch(p,d).then((function(e){return e.json()})).then((function(e){e.props&&(o((function(e){return function(e,t){var n=t.findIndex((function(t){return t.key===e}));return n<0?t:[].concat(c(t.slice(0,n)),[i(i({},t[n]),{},{isDlpGoingToPop:!0})],c(t.slice(n+1,t.length)))}(t,e)})),setTimeout((function(){o((function(n){return function(e,t,n){var r=n.findIndex((function(t){return t.key===e}));return r<0?n:[].concat(c(n.slice(0,r)),[i(i({},n[r]),{},{dlpProps:t})],c(n.slice(r+1,n.length)))}(t,e.props,n)})),u((function(t){return[].concat(c(t),[e.props.smartFormVariant.id])}))}),3500))}))},g=function(e,t){var n=t.findIndex((function(t){return t.key===e.messageId}));return n>0?h(e,t,n):function(e,t){return[].concat(c(t),[{role:r.Pu.HAL,content:e.message,sources:e.sources,searchResults:e.searchResults,key:e.messageId,isTyping:!0,index:t.length,knowsAnswer:e.knowsAnswer}])}(e,t)},A=function(e,t){t((function(t){var n=t.findIndex((function(t){return t.key===e})),r=n>0?n:t.length-1;return[].concat(c(t.slice(0,r)),[i(i({},t[r]),{},{isTyping:!1})],c(t.slice(r+1,t.length)))}))},v=function(e,t,n,r){A(e,r),t&&t.close(),n(null)},m=function(e){var t=e.filter((function(e){return e.role===r.Pu.USER}));return t.length&&t[t.length-1].content||""},y=function(e){return e.slice().reverse().find((function(e){return e.role===r.Pu.HAL}))},S=function(e){var t=y(e);return(null===t||void 0===t?void 0:t.content)||""},b=function(e,t,n){if(e.length){var r=(new Date).valueOf()-t,o=e.map((function(e){return e.responseTime})).reduce((function(e,t){return(null!==e&&void 0!==e?e:0)+(null!==t&&void 0!==t?t:0)}));return r-(null!==o&&void 0!==o?o:0)}return n((new Date).valueOf()),0},w=function(e,t,n,a,i,u,l,h,p,g,A){var v=e.trim();if(v){a.length||d({event:A?r.xC.AHA_IN_HUB_INITIAL_CHAT:r.xC.AHA_INITIAL_CHAT,properties:{role:r.Pu.USER,content:v},type:A?r.yp.AHA_IN_HUB_MESSAGE:r.yp.AHA_MESSAGE},u);var y=b(a,l,h);if(t((function(e){return[].concat(c(e),[{role:r.Pu.USER,content:v,key:(0,o.A)(),isTyping:!1,index:e.length,responseTime:y}])})),d({event:A?r.xC.AHA_IN_HUB_MESSAGE:r.xC.AHA_MESSAGE,properties:{role:r.Pu.USER,content:v,prevAssistantResponse:S(a),responseTime:y},type:A?r.yp.AHA_IN_HUB_MESSAGE:r.yp.AHA_MESSAGE},u),n(!0),u&&"debugdebugdebug"===e)return g(r.y_.debug),t((function(e){return[].concat(c(e),[{role:r.Pu.HAL,content:"DEBUG MODE ACTIVATED!!!\n\nTo view debug info, open this open the browser's console with option+command+J",key:(0,o.A)(),isTyping:!1,index:e.length,responseTime:b(a,l,h)}])})),void n(!1);(0,s.Ay)()?f(v,i.id,a,p,i.homePageURL):function(e,t,n,s,a,i,u){var l={accountId:n,query:e,conversationHistory:s.map((function(e){return{role:e.role,content:e.content}}))},f={method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(l)};fetch("/widgets/conversational-search/query",f).then((function(e){return e.json()})).then((function(e){a((function(t){return[].concat(c(t),[{role:r.Pu.HAL,content:e.response,sources:e.sources,searchResults:e.searchResults,key:(0,o.A)(),isTyping:!1,index:t.length,knowsAnswer:e.knowsAnswer}])})),d({event:u?r.xC.AHA_IN_HUB_MESSAGE:r.xC.AHA_MESSAGE,properties:{role:r.Pu.HAL,userQuery:m(s),content:e.response,sources:e.sources,knowsAnswer:e.knowsAnswer},type:u?r.yp.AHA_IN_HUB_MESSAGE:r.yp.AHA_MESSAGE},t),i(!1)}))}(v,u,i.id,a,t,n,A)}},E=function(e,t,n,o,s,a,i,u,c,l,f,h,v){var y,S,b=JSON.parse(e.data);if((b.message||null!==(y=b.sources)&&void 0!==y&&y.length||b.searchResults)&&(a(!1),s((function(e){return g(b,e)}))),b.endpointStatus)switch(b.endpointStatus.status){case r.qT.SEARCHING:i({status:r.qT.SEARCHING,content:b.endpointStatus.content});break;case r.qT.GATHERING:i({status:r.qT.GATHERING,content:b.endpointStatus.content});break;default:case r.qT.INTERPRETING:i({status:r.qT.INTERPRETING})}(b.debugInfo&&v===r.y_.debug&&console.log(b.debugInfo),b.finishReason)&&(setTimeout((function(){return A(b.messageId,s)}),1e3),u&&u.close(),c(null),null!==(S=b.sources)&&void 0!==S&&S.length&&p(b.sources,b.messageId,t,n,s,l,f,h),s((function(e){return d({event:h?r.xC.AHA_IN_HUB_MESSAGE:r.xC.AHA_MESSAGE,properties:{role:r.Pu.HAL,content:e[e.length-1].content,sources:e[e.length-1].sources,userQuery:m(o),knowsAnswer:b.knowsAnswer,responseTime:e[e.length-1].responseTime},type:h?r.yp.AHA_IN_HUB_MESSAGE:r.yp.AHA_MESSAGE},n),e})))}},47446:function(e,t,n){"use strict";n.r(t);var r=n(96540);t.default=function(){return r.createElement("div",{className:"loading-dots my-auto pt-0.5 ml-3"},r.createElement("div",{className:"dot"}),r.createElement("div",{className:"dot"}),r.createElement("div",{className:"dot"}))}},72622:function(e,t,n){"use strict";n.r(t);var r=n(96540);t.default=function(e){var t=e.givenClassName;return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3.5,stroke:"currentColor",className:t||"w-6 h-6"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"}))}},64556:function(e,t,n){"use strict";n.r(t);var r=n(96540);t.default=function(e){var t=e.className;return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"}))}},6150:function(e,t,n){"use strict";n.r(t);var r=n(96540);t.default=function(e){var t=e.className;return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:.5,stroke:"currentColor",className:t||"w-6 h-6"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2929 16.7071C11.9024 16.3166 11.9024 15.6834 12.2929 15.2929L14.5858 13H9C5.13401 13 2 9.86599 2 6V4C2 3.44771 2.44771 3 3 3C3.55229 3 4 3.44771 4 4V6C4 8.76142 6.23858 11 9 11H14.5858L12.2929 8.70711C11.9024 8.31658 11.9024 7.68342 12.2929 7.29289C12.6834 6.90237 13.3166 6.90237 13.7071 7.29289L17.7071 11.2929C18.0976 11.6834 18.0976 12.3166 17.7071 12.7071L13.7071 16.7071C13.3166 17.0976 12.6834 17.0976 12.2929 16.7071Z",fill:"#94A3B8"}))}},12948:function(e,t,n){"use strict";n(2077),n(24674);var r=n(6224),o=n.n(r);n(78624),n(90170),n(11325);o().start();var s=n(33981);n(84840).useContext(s)},24674:function(e,t,n){"use strict";var r=n(23337),o=n.n(r);window.hasRailsUjsStarted||(o().start(),window.hasRailsUjsStarted=!0)},2077:function(e,t,n){"use strict";var r=n(48583),o=n(92744),s=n(36159);r.T({dsn:"https://d17e0862d013461f8a35cab4e272314b@o1037722.ingest.sentry.io/6005829",integrations:[new o.IQ.BrowserTracing],tracesSampleRate:.5,ignoreErrors:s.d})},15324:function(e,t,n){"use strict";var r=n(96540),o=n(9694);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s,a,i=[],u=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.A=function(){var e=s((0,r.useState)(""),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e,t=function(e){var t=e.data;(t||{}).type===o.yp.SET_HALDA_WIDGET_MODE&&n(t.haldaWidgetMode)};return null===(e=window)||void 0===e||e.addEventListener("message",t),function(){window.removeEventListener("message",t)}}),[]),[t,n]}},51226:function(e,t,n){"use strict";var r=n(96540);function o({title:e,titleId:t,...n},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const s=r.forwardRef(o);t.A=s}},function(e){e.O(0,[699,741,333,526,337,224,1,852,926,222,881],(function(){return t=12948,e(e.s=t);var t}));e.O()}]);